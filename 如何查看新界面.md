# 如何查看新添加的界面功能

## 🎯 重要说明

新添加的功能在**预览窗口的右侧控制面板**中，不是在主GUI窗口！

---

## 📍 查看方法

### 方法1：直接测试新界面（推荐）

运行测试脚本：
```bash
python test_new_interface.py
```

这会直接打开预览窗口，您应该能看到：

---

## 🖼️ 新界面位置说明

### 预览窗口布局

```
┌─────────────────────────────────────────────────────────────┐
│  交互式预览 - 使用方向键或按钮调整位置                        │
├──────────────────────────┬──────────────────────────────────┤
│                          │  ← 这里是右侧控制面板             │
│                          │                                   │
│                          │  ┌─ 调整对象 ─────────────────┐  │
│                          │  │ ○ 🎨 色带位置              │  │
│      左侧：图形显示       │  │ ○ 📏 比例尺位置            │  │
│                          │  │ ○ 🧭 北箭位置              │  │
│                          │  └────────────────────────────┘  │
│                          │                                   │
│                          │  ┌─ 方向控制 ─────────────────┐  │ ← 新增！
│                          │  │ 步长: ○小 ●中 ○大         │  │
│                          │  │                             │  │
│                          │  │        ▲                    │  │ ← 新增！
│                          │  │    ◀   ●   ▶                │  │ ← 新增！
│                          │  │        ▼                    │  │ ← 新增！
│                          │  │                             │  │
│                          │  │ 等待操作...                 │  │ ← 新增！
│                          │  └────────────────────────────┘  │
│                          │                                   │
│                          │  ┌─ 视图控制 ─────────────────┐  │ ← 新增！
│                          │  │ ☑ 🔒 锁定视图（防止缩放）  │  │ ← 新增！
│                          │  │ [🔄 恢复视图]              │  │ ← 新增！
│                          │  │ 视图状态: 正常              │  │ ← 新增！
│                          │  └────────────────────────────┘  │
│                          │                                   │
│                          │  ┌─ 当前偏移量 ───────────────┐  │
│                          │  │ cbar_offset_y: 0.000       │  │
│                          │  │ ...                        │  │
│                          │  └────────────────────────────┘  │
│                          │                                   │
│                          │  [💾 保存图片]                    │
│                          │  [💾 保存位置设置]                │
│                          │  [🔄 重置所有位置]                │
│                          │  [❌ 关闭]                        │
└──────────────────────────┴──────────────────────────────────┘
```

---

## 🔍 新增内容详细说明

### 1. 方向控制区域（新增）

在右侧控制面板中，您应该能看到：

```
┌─ 方向控制 ─────────────────┐
│ 步长: ○小 ●中 ○大         │  ← 这是新增的步长选择
│                             │
│        ▲                    │  ← 这是新增的向上按钮
│    ◀   ●   ▶                │  ← 这是新增的左/中心/右按钮
│        ▼                    │  ← 这是新增的向下按钮
│                             │
│ 等待操作...                 │  ← 这是新增的反馈显示区域
└────────────────────────────┘
```

**功能**：
- **步长选择**：点击"小"、"中"、"大"选择移动步长
- **方向按钮**：点击 ▲▼◀▶ 移动当前选中的元素
- **中心按钮**：点击 ● 重置当前元素位置
- **反馈显示**：显示操作结果（绿色✓表示成功）

---

### 2. 视图控制区域（新增）

在方向控制下方，您应该能看到：

```
┌─ 视图控制 ─────────────────┐
│ ☑ 🔒 锁定视图（防止缩放）  │  ← 这是新增的锁定复选框
│ [🔄 恢复视图]              │  ← 这是新增的恢复按钮
│ 视图状态: 正常              │  ← 这是新增的状态显示
└────────────────────────────┘
```

**功能**：
- **锁定视图**：勾选后防止图形缩放（默认已勾选）
- **恢复视图**：如果图形缩放了，点击此按钮恢复
- **视图状态**：显示当前视图状态

---

## 🧪 测试步骤

### 步骤1：运行测试脚本
```bash
python test_new_interface.py
```

### 步骤2：查看右侧控制面板
窗口打开后，**看右侧**，应该能看到：
1. 调整对象（色带/比例尺/北箭）
2. **方向控制**（新增的按钮区域）
3. **视图控制**（新增的锁定区域）
4. 当前偏移量
5. 底部按钮

### 步骤3：测试方向按钮
1. 选择一个调整对象（如：📏 比例尺位置）
2. 点击 ▲ 按钮
3. 观察：
   - 反馈区域应该显示：`✓ 比例尺向上移动 (步长: 0.010)`（绿色）
   - 图形应该有变化

### 步骤4：测试步长选择
1. 点击"大"步长
2. 再点击 ▲ 按钮
3. 观察：
   - 反馈区域应该显示：`✓ 比例尺向上移动 (步长: 0.050)`
   - 移动幅度应该更大

### 步骤5：测试视图锁定
1. 确保"🔒 锁定视图"已勾选
2. 使用方向键（↑↓←→）移动
3. 观察：
   - 图形不应该缩放
   - 如果缩放了，点击"🔄 恢复视图"

---

## ❓ 如果看不到新界面

### 检查清单

#### 1. 确认运行的是正确的脚本
```bash
# 正确：直接测试新界面
python test_new_interface.py

# 错误：这是主GUI，需要先生成图再点预览
python test_gui.py
```

#### 2. 确认窗口完全打开
- 等待窗口完全加载
- 窗口标题应该是："交互式预览 - 使用方向键或按钮调整位置"

#### 3. 确认查看右侧面板
- 新功能在**右侧控制面板**
- 不是在左侧的图形区域
- 向下滚动查看所有控件

#### 4. 确认代码已更新
运行以下命令检查：
```bash
python -c "from interactive_preview import InteractivePreviewWindow; import inspect; print('_move_direction' in dir(InteractivePreviewWindow))"
```
应该输出：`True`

---

## 📸 界面对比

### 旧版本（没有新功能）
```
右侧控制面板：
┌─────────────────────┐
│ 调整对象            │
│ ○ 色带位置          │
│ ○ 比例尺位置        │
│ ○ 北箭位置          │
├─────────────────────┤
│ 快捷键说明          │  ← 只有文字说明
│ Tab: 切换           │
│ ↑↓←→: 移动         │
│ ...                 │
├─────────────────────┤
│ 当前偏移量          │
│ ...                 │
└─────────────────────┘
```

### 新版本（有新功能）
```
右侧控制面板：
┌─────────────────────┐
│ 调整对象            │
│ ○ 🎨 色带位置       │  ← 有emoji图标
│ ○ 📏 比例尺位置     │
│ ○ 🧭 北箭位置       │
├─────────────────────┤
│ 方向控制            │  ← 新增！
│ 步长: ○小 ●中 ○大  │  ← 新增！
│        ▲            │  ← 新增！
│    ◀   ●   ▶        │  ← 新增！
│        ▼            │  ← 新增！
│ 等待操作...         │  ← 新增！
├─────────────────────┤
│ 视图控制            │  ← 新增！
│ ☑ 🔒 锁定视图       │  ← 新增！
│ [🔄 恢复视图]       │  ← 新增！
│ 视图状态: 正常      │  ← 新增！
├─────────────────────┤
│ 当前偏移量          │
│ ...                 │
└─────────────────────┘
```

---

## 🎮 快速验证

运行以下命令，应该能看到新界面：

```bash
# 1. 运行测试脚本
python test_new_interface.py

# 2. 窗口打开后，看右侧面板

# 3. 应该能看到：
#    - 方向控制区域（带▲▼◀▶按钮）
#    - 视图控制区域（带锁定复选框）

# 4. 点击一个方向按钮

# 5. 应该能看到绿色的反馈信息
```

---

## 💡 提示

1. **新功能在右侧**：所有新增的按钮和控件都在右侧控制面板
2. **向下滚动**：如果窗口较小，可能需要向下滚动才能看到所有控件
3. **观察反馈**：每次点击按钮后，观察反馈区域的提示信息
4. **测试脚本**：使用 `test_new_interface.py` 可以直接看到新界面

---

## 📞 如果还是看不到

请告诉我：
1. 运行的是哪个脚本？（test_gui.py 还是 test_new_interface.py？）
2. 窗口打开了吗？
3. 右侧控制面板有哪些内容？
4. 能看到"方向控制"这几个字吗？
5. 能看到 ▲▼◀▶ 这些按钮吗？

我会帮您进一步排查！

